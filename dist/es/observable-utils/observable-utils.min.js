import t from"xstream";var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function n(t,i,n){return t(n={path:i,exports:{},require:function(t,i){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==i&&n.path)}},n.exports),n.exports}var o=function(t){var i,n=t.Symbol;return"function"==typeof n?n.observable?i=n.observable:(i=n("observable"),n.observable=i):i="@@observable",i}("undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof module?module:Function("return this")()),e=n((function(t,n){var e,r=i&&i.__extends||(e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])})(t,i)},function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var s={};function u(){}function h(t){for(var i=t.length,n=Array(i),o=0;o<i;++o)n[o]=t[o];return n}function p(t,i,n){try{return t.f(i)}catch(t){return n._e(t),s}}n.NO=s;var c={_n:u,_e:u,_c:u};function a(t){t._start=function(t){t.next=t._n,t.error=t._e,t.complete=t._c,this.start(t)},t._stop=t.stop}n.NO_IL=c;var f=function(){function t(t,i){this._stream=t,this._listener=i}return t.prototype.unsubscribe=function(){this._stream._remove(this._listener)},t}(),_=function(){function t(t){this._listener=t}return t.prototype.next=function(t){this._listener._n(t)},t.prototype.error=function(t){this._listener._e(t)},t.prototype.complete=function(){this._listener._c()},t}(),l=function(){function t(t){this.type="fromObservable",this.ins=t,this.active=!1}return t.prototype._start=function(t){this.out=t,this.active=!0,this._sub=this.ins.subscribe(new _(t)),this.active||this._sub.unsubscribe()},t.prototype._stop=function(){this._sub&&this._sub.unsubscribe(),this.active=!1},t}(),v=function(){function t(t){this.type="merge",this.insArr=t,this.out=s,this.ac=0}return t.prototype._start=function(t){this.out=t;var i=this.insArr,n=i.length;this.ac=n;for(var o=0;o<n;o++)i[o]._add(this)},t.prototype._stop=function(){for(var t=this.insArr,i=t.length,n=0;n<i;n++)t[n]._remove(this);this.out=s},t.prototype._n=function(t){var i=this.out;i!==s&&i._n(t)},t.prototype._e=function(t){var i=this.out;i!==s&&i._e(t)},t.prototype._c=function(){if(--this.ac<=0){var t=this.out;if(t===s)return;t._c()}},t}(),y=function(){function t(t,i,n){this.i=t,this.out=i,this.p=n,n.ils.push(this)}return t.prototype._n=function(t){var i=this.p,n=this.out;if(n!==s&&i.up(t,this.i)){var o=h(i.vals);n._n(o)}},t.prototype._e=function(t){var i=this.out;i!==s&&i._e(t)},t.prototype._c=function(){var t=this.p;t.out!==s&&0==--t.Nc&&t.out._c()},t}(),d=function(){function t(t){this.type="combine",this.insArr=t,this.out=s,this.ils=[],this.Nc=this.Nn=0,this.vals=[]}return t.prototype.up=function(t,i){var n=this.vals[i],o=this.Nn?n===s?--this.Nn:this.Nn:0;return this.vals[i]=t,0===o},t.prototype._start=function(t){this.out=t;var i=this.insArr,n=this.Nc=this.Nn=i.length,o=this.vals=new Array(n);if(0===n)t._n([]),t._c();else for(var e=0;e<n;e++)o[e]=s,i[e]._add(new y(e,t,this))},t.prototype._stop=function(){for(var t=this.insArr,i=t.length,n=this.ils,o=0;o<i;o++)t[o]._remove(n[o]);this.out=s,this.ils=[],this.vals=[]},t}(),m=function(){function t(t){this.type="fromArray",this.a=t}return t.prototype._start=function(t){for(var i=this.a,n=0,o=i.length;n<o;n++)t._n(i[n]);t._c()},t.prototype._stop=function(){},t}(),w=function(){function t(t){this.type="fromPromise",this.on=!1,this.p=t}return t.prototype._start=function(t){var i=this;this.on=!0,this.p.then((function(n){i.on&&(t._n(n),t._c())}),(function(i){t._e(i)})).then(u,(function(t){setTimeout((function(){throw t}))}))},t.prototype._stop=function(){this.on=!1},t}(),b=function(){function t(t){this.type="periodic",this.period=t,this.intervalID=-1,this.i=0}return t.prototype._start=function(t){var i=this;this.intervalID=setInterval((function(){t._n(i.i++)}),this.period)},t.prototype._stop=function(){-1!==this.intervalID&&clearInterval(this.intervalID),this.intervalID=-1,this.i=0},t}(),g=function(){function t(t,i){this.type="debug",this.ins=t,this.out=s,this.s=u,this.l="","string"==typeof i?this.l=i:"function"==typeof i&&(this.s=i)}return t.prototype._start=function(t){this.out=t,this.ins._add(this)},t.prototype._stop=function(){this.ins._remove(this),this.out=s},t.prototype._n=function(t){var i=this.out;if(i!==s){var n=this.s,o=this.l;if(n!==u)try{n(t)}catch(t){i._e(t)}else o?console.log(o+":",t):console.log(t);i._n(t)}},t.prototype._e=function(t){var i=this.out;i!==s&&i._e(t)},t.prototype._c=function(){var t=this.out;t!==s&&t._c()},t}(),I=function(){function t(t,i){this.type="drop",this.ins=i,this.out=s,this.max=t,this.dropped=0}return t.prototype._start=function(t){this.out=t,this.dropped=0,this.ins._add(this)},t.prototype._stop=function(){this.ins._remove(this),this.out=s},t.prototype._n=function(t){var i=this.out;i!==s&&this.dropped++>=this.max&&i._n(t)},t.prototype._e=function(t){var i=this.out;i!==s&&i._e(t)},t.prototype._c=function(){var t=this.out;t!==s&&t._c()},t}(),O=function(){function t(t,i){this.out=t,this.op=i}return t.prototype._n=function(){this.op.end()},t.prototype._e=function(t){this.out._e(t)},t.prototype._c=function(){this.op.end()},t}(),S=function(){function t(t,i){this.type="endWhen",this.ins=i,this.out=s,this.o=t,this.oil=c}return t.prototype._start=function(t){this.out=t,this.o._add(this.oil=new O(t,this)),this.ins._add(this)},t.prototype._stop=function(){this.ins._remove(this),this.o._remove(this.oil),this.out=s,this.oil=c},t.prototype.end=function(){var t=this.out;t!==s&&t._c()},t.prototype._n=function(t){var i=this.out;i!==s&&i._n(t)},t.prototype._e=function(t){var i=this.out;i!==s&&i._e(t)},t.prototype._c=function(){this.end()},t}(),N=function(){function t(t,i){this.type="filter",this.ins=i,this.out=s,this.f=t}return t.prototype._start=function(t){this.out=t,this.ins._add(this)},t.prototype._stop=function(){this.ins._remove(this),this.out=s},t.prototype._n=function(t){var i=this.out;if(i!==s){var n=p(this,t,i);n!==s&&n&&i._n(t)}},t.prototype._e=function(t){var i=this.out;i!==s&&i._e(t)},t.prototype._c=function(){var t=this.out;t!==s&&t._c()},t}(),x=function(){function t(t,i){this.out=t,this.op=i}return t.prototype._n=function(t){this.out._n(t)},t.prototype._e=function(t){this.out._e(t)},t.prototype._c=function(){this.op.inner=s,this.op.less()},t}(),M=function(){function t(t){this.type="flatten",this.ins=t,this.out=s,this.open=!0,this.inner=s,this.il=c}return t.prototype._start=function(t){this.out=t,this.open=!0,this.inner=s,this.il=c,this.ins._add(this)},t.prototype._stop=function(){this.ins._remove(this),this.inner!==s&&this.inner._remove(this.il),this.out=s,this.open=!0,this.inner=s,this.il=c},t.prototype.less=function(){var t=this.out;t!==s&&(this.open||this.inner!==s||t._c())},t.prototype._n=function(t){var i=this.out;if(i!==s){var n=this.inner,o=this.il;n!==s&&o!==c&&n._remove(o),(this.inner=t)._add(this.il=new x(i,this))}},t.prototype._e=function(t){var i=this.out;i!==s&&i._e(t)},t.prototype._c=function(){this.open=!1,this.less()},t}(),P=function(){function t(t,i,n){var o=this;this.type="fold",this.ins=n,this.out=s,this.f=function(i){return t(o.acc,i)},this.acc=this.seed=i}return t.prototype._start=function(t){this.out=t,this.acc=this.seed,t._n(this.acc),this.ins._add(this)},t.prototype._stop=function(){this.ins._remove(this),this.out=s,this.acc=this.seed},t.prototype._n=function(t){var i=this.out;if(i!==s){var n=p(this,t,i);n!==s&&i._n(this.acc=n)}},t.prototype._e=function(t){var i=this.out;i!==s&&i._e(t)},t.prototype._c=function(){var t=this.out;t!==s&&t._c()},t}(),L=function(){function t(t){this.type="last",this.ins=t,this.out=s,this.has=!1,this.val=s}return t.prototype._start=function(t){this.out=t,this.has=!1,this.ins._add(this)},t.prototype._stop=function(){this.ins._remove(this),this.out=s,this.val=s},t.prototype._n=function(t){this.has=!0,this.val=t},t.prototype._e=function(t){var i=this.out;i!==s&&i._e(t)},t.prototype._c=function(){var t=this.out;t!==s&&(this.has?(t._n(this.val),t._c()):t._e(new Error("last() failed because input stream completed")))},t}(),k=function(){function t(t,i){this.type="map",this.ins=i,this.out=s,this.f=t}return t.prototype._start=function(t){this.out=t,this.ins._add(this)},t.prototype._stop=function(){this.ins._remove(this),this.out=s},t.prototype._n=function(t){var i=this.out;if(i!==s){var n=p(this,t,i);n!==s&&i._n(n)}},t.prototype._e=function(t){var i=this.out;i!==s&&i._e(t)},t.prototype._c=function(){var t=this.out;t!==s&&t._c()},t}(),E=function(){function t(t){this.type="remember",this.ins=t,this.out=s}return t.prototype._start=function(t){this.out=t,this.ins._add(t)},t.prototype._stop=function(){this.ins._remove(this.out),this.out=s},t}(),D=function(){function t(t,i){this.type="replaceError",this.ins=i,this.out=s,this.f=t}return t.prototype._start=function(t){this.out=t,this.ins._add(this)},t.prototype._stop=function(){this.ins._remove(this),this.out=s},t.prototype._n=function(t){var i=this.out;i!==s&&i._n(t)},t.prototype._e=function(t){var i=this.out;if(i!==s)try{this.ins._remove(this),(this.ins=this.f(t))._add(this)}catch(t){i._e(t)}},t.prototype._c=function(){var t=this.out;t!==s&&t._c()},t}(),j=function(){function t(t,i){this.type="startWith",this.ins=t,this.out=s,this.val=i}return t.prototype._start=function(t){this.out=t,this.out._n(this.val),this.ins._add(t)},t.prototype._stop=function(){this.ins._remove(this.out),this.out=s},t}(),A=function(){function t(t,i){this.type="take",this.ins=i,this.out=s,this.max=t,this.taken=0}return t.prototype._start=function(t){this.out=t,this.taken=0,this.max<=0?t._c():this.ins._add(this)},t.prototype._stop=function(){this.ins._remove(this),this.out=s},t.prototype._n=function(t){var i=this.out;if(i!==s){var n=++this.taken;n<this.max?i._n(t):n===this.max&&(i._n(t),i._c())}},t.prototype._e=function(t){var i=this.out;i!==s&&i._e(t)},t.prototype._c=function(){var t=this.out;t!==s&&t._c()},t}(),T=function(){function t(t){this._prod=t||s,this._ils=[],this._stopID=s,this._dl=s,this._d=!1,this._target=null,this._err=s}return t.prototype._n=function(t){var i=this._ils,n=i.length;if(this._d&&this._dl._n(t),1==n)i[0]._n(t);else{if(0==n)return;for(var o=h(i),e=0;e<n;e++)o[e]._n(t)}},t.prototype._e=function(t){if(this._err===s){this._err=t;var i=this._ils,n=i.length;if(this._x(),this._d&&this._dl._e(t),1==n)i[0]._e(t);else{if(0==n)return;for(var o=h(i),e=0;e<n;e++)o[e]._e(t)}if(!this._d&&0==n)throw this._err}},t.prototype._c=function(){var t=this._ils,i=t.length;if(this._x(),this._d&&this._dl._c(),1==i)t[0]._c();else{if(0==i)return;for(var n=h(t),o=0;o<i;o++)n[o]._c()}},t.prototype._x=function(){0!==this._ils.length&&(this._prod!==s&&this._prod._stop(),this._err=s,this._ils=[])},t.prototype._stopNow=function(){this._prod._stop(),this._err=s,this._stopID=s},t.prototype._add=function(t){var i=this._target;if(i)return i._add(t);var n=this._ils;if(n.push(t),!(n.length>1))if(this._stopID!==s)clearTimeout(this._stopID),this._stopID=s;else{var o=this._prod;o!==s&&o._start(this)}},t.prototype._remove=function(t){var i=this,n=this._target;if(n)return n._remove(t);var o=this._ils,e=o.indexOf(t);e>-1&&(o.splice(e,1),this._prod!==s&&o.length<=0?(this._err=s,this._stopID=setTimeout((function(){return i._stopNow()}))):1===o.length&&this._pruneCycles())},t.prototype._pruneCycles=function(){this._hasNoSinks(this,[])&&this._remove(this._ils[0])},t.prototype._hasNoSinks=function(t,i){if(-1!==i.indexOf(t))return!0;if(t.out===this)return!0;if(t.out&&t.out!==s)return this._hasNoSinks(t.out,i.concat(t));if(t._ils){for(var n=0,o=t._ils.length;n<o;n++)if(!this._hasNoSinks(t._ils[n],i.concat(t)))return!1;return!0}return!1},t.prototype.ctor=function(){return this instanceof q?q:t},t.prototype.addListener=function(t){t._n=t.next||u,t._e=t.error||u,t._c=t.complete||u,this._add(t)},t.prototype.removeListener=function(t){this._remove(t)},t.prototype.subscribe=function(t){return this.addListener(t),new f(this,t)},t.prototype[o.default]=function(){return this},t.create=function(i){if(i){if("function"!=typeof i.start||"function"!=typeof i.stop)throw new Error("producer requires both start and stop functions");a(i)}return new t(i)},t.createWithMemory=function(t){return t&&a(t),new q(t)},t.never=function(){return new t({_start:u,_stop:u})},t.empty=function(){return new t({_start:function(t){t._c()},_stop:u})},t.throw=function(i){return new t({_start:function(t){t._e(i)},_stop:u})},t.from=function(i){if("function"==typeof i[o.default])return t.fromObservable(i);if("function"==typeof i.then)return t.fromPromise(i);if(Array.isArray(i))return t.fromArray(i);throw new TypeError("Type of input to from() must be an Array, Promise, or Observable")},t.of=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];return t.fromArray(i)},t.fromArray=function(i){return new t(new m(i))},t.fromPromise=function(i){return new t(new w(i))},t.fromObservable=function(i){if(i.endWhen)return i;var n="function"==typeof i[o.default]?i[o.default]():i;return new t(new l(n))},t.periodic=function(i){return new t(new b(i))},t.prototype._map=function(t){return new(this.ctor())(new k(t,this))},t.prototype.map=function(t){return this._map(t)},t.prototype.mapTo=function(t){var i=this.map((function(){return t}));return i._prod.type="mapTo",i},t.prototype.filter=function(i){var n,o,e=this._prod;return new t(e instanceof N?new N((n=e.f,o=i,function(t){return n(t)&&o(t)}),e.ins):new N(i,this))},t.prototype.take=function(t){return new(this.ctor())(new A(t,this))},t.prototype.drop=function(i){return new t(new I(i,this))},t.prototype.last=function(){return new t(new L(this))},t.prototype.startWith=function(t){return new q(new j(this,t))},t.prototype.endWhen=function(t){return new(this.ctor())(new S(t,this))},t.prototype.fold=function(t,i){return new q(new P(t,i,this))},t.prototype.replaceError=function(t){return new(this.ctor())(new D(t,this))},t.prototype.flatten=function(){return new t(new M(this))},t.prototype.compose=function(t){return t(this)},t.prototype.remember=function(){return new q(new E(this))},t.prototype.debug=function(t){return new(this.ctor())(new g(this,t))},t.prototype.imitate=function(t){if(t instanceof q)throw new Error("A MemoryStream was given to imitate(), but it only supports a Stream. Read more about this restriction here: https://github.com/staltz/xstream#faq");this._target=t;for(var i=this._ils,n=i.length,o=0;o<n;o++)t._add(i[o]);this._ils=[]},t.prototype.shamefullySendNext=function(t){this._n(t)},t.prototype.shamefullySendError=function(t){this._e(t)},t.prototype.shamefullySendComplete=function(){this._c()},t.prototype.setDebugListener=function(t){t?(this._d=!0,t._n=t.next||u,t._e=t.error||u,t._c=t.complete||u,this._dl=t):(this._d=!1,this._dl=s)},t.merge=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];return new t(new v(i))},t.combine=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];return new t(new d(i))},t}();n.Stream=T;var q=function(t){function i(i){var n=t.call(this,i)||this;return n._has=!1,n}return r(i,t),i.prototype._n=function(i){this._v=i,this._has=!0,t.prototype._n.call(this,i)},i.prototype._add=function(t){var i=this._target;if(i)return i._add(t);var n=this._ils;if(n.push(t),n.length>1)this._has&&t._n(this._v);else if(this._stopID!==s)this._has&&t._n(this._v),clearTimeout(this._stopID),this._stopID=s;else if(this._has)t._n(this._v);else{var o=this._prod;o!==s&&o._start(this)}},i.prototype._stopNow=function(){this._has=!1,t.prototype._stopNow.call(this)},i.prototype._x=function(){this._has=!1,t.prototype._x.call(this)},i.prototype.map=function(t){return this._map(t)},i.prototype.mapTo=function(i){return t.prototype.mapTo.call(this,i)},i.prototype.take=function(i){return t.prototype.take.call(this,i)},i.prototype.endWhen=function(i){return t.prototype.endWhen.call(this,i)},i.prototype.replaceError=function(i){return t.prototype.replaceError.call(this,i)},i.prototype.remember=function(){return this},i.prototype.debug=function(i){return t.prototype.debug.call(this,i)},i}(T);n.MemoryStream=q;var C=T;n.default=C})),r=n((function(t,i){Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(t){this.streams=t,this.type="concat",this.out=null,this.i=0}return t.prototype._start=function(t){this.out=t,this.streams[this.i]._add(this)},t.prototype._stop=function(){var t=this.streams;this.i<t.length&&t[this.i]._remove(this),this.i=0,this.out=null},t.prototype._n=function(t){var i=this.out;i&&i._n(t)},t.prototype._e=function(t){var i=this.out;i&&i._e(t)},t.prototype._c=function(){var t=this.out;if(t){var i=this.streams;i[this.i]._remove(this),++this.i<i.length?i[this.i]._add(this):t._c()}},t}();i.default=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return new e.Stream(new n(t))}})),s=n((function(t,i){Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(t,i){this.diagram=t.trim(),this.errorVal=i&&i.errorValue?i.errorValue:"#",this.timeUnit=i&&i.timeUnit?i.timeUnit:20,this.values=i&&i.values?i.values:{},this.tasks=[]}return t.prototype._start=function(t){for(var i=this.diagram.length,n=0;n<i;n++){var o=this.diagram[n],e=this.timeUnit*n;switch(o){case"-":break;case"#":this.schedule({type:"error",value:this.errorVal,time:e},t);break;case"|":this.schedule({type:"complete",time:e},t);break;default:var r=this.values.hasOwnProperty(o)?this.values[o]:o;this.schedule({type:"next",value:r,time:e},t)}}},t.prototype.schedule=function(t,i){var n=setInterval((function(){switch(t.type){case"next":i._n(t.value);break;case"error":i._e(t.value);break;case"complete":i._c()}clearInterval(n)}),t.time);this.tasks.push(n)},t.prototype._stop=function(){this.tasks.forEach((function(t){return clearInterval(t)}))},t}();i.DiagramProducer=n,i.default=function(t,i){return new e.Stream(new n(t,i))}})),u=n((function(t,i){Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(t,i,n){this.node=t,this.eventType=i,this.useCapture=n,this.type="fromEvent"}return t.prototype._start=function(t){this.listener=function(i){return t._n(i)},this.node.addEventListener(this.eventType,this.listener,this.useCapture)},t.prototype._stop=function(){this.node.removeEventListener(this.eventType,this.listener,this.useCapture),this.listener=null},t}();i.DOMEventProducer=n;var o=function(){function t(t,i){this.node=t,this.eventName=i,this.type="fromEvent"}return t.prototype._start=function(t){this.listener=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];return i.length>1?t._n(i):t._n(i[0])},this.node.addListener(this.eventName,this.listener)},t.prototype._stop=function(){this.node.removeListener(this.eventName,this.listener),this.listener=null},t}();i.NodeEventProducer=o,i.default=function(t,i,r){return void 0===r&&(r=!1),function(t){return t.emit&&t.addListener}(t)?new e.Stream(new o(t,i)):new e.Stream(new n(t,i,r))}})),h=n((function(t,i){function n(t,i,n){return i*(1-t)+n*t}function o(t){var i=function(t){return function(i){return 1-t(1-i)}}(t);return{easeIn:function(i,o,e){return n(t(i),o,e)},easeOut:function(t,o,e){return n(i(t),o,e)},easeInOut:function(o,e,r){return n(o<.5?.5*t(2*o):.5+.5*i(2*(o-.5)),e,r)}}}Object.defineProperty(i,"__esModule",{value:!0});var s=o((function(t){return t*t})),u=o((function(t){return t*t*t})),h=o((function(t){var i=t*t;return i*i})),p=Math.exp(6)-1;var c=o((function(t){return(Math.exp(6*t)-1)/p})),a=o((function(t){return t*t*(2.70158*t-1.70158)}));var f=o((function(t){return 1-function(t){var i=t;return i<1/2.75?7.5625*i*i:i<2/2.75?7.5625*(i-=1.5/2.75)*i+.75:i<2.5/2.75?7.5625*(i-=2.25/2.75)*i+.9375:7.5625*(i-=2.625/2.75)*i+.984375}(1-t)})),_=o((function(t){return-(Math.sqrt(1-t*t)-1)}));var l=o((function(t){var i=t;return i<=0?0:i>=1?1:(i-=1,-1*Math.pow(2,10*i)*Math.sin((i-.075)*(2*Math.PI)/.3))})),v=.5*Math.PI,y=o((function(t){return 1-Math.cos(t*v)}));var d=function(t){var i=t.from,n=t.to,o=t.duration,s=t.ease,u=void 0===s?d.linear.ease:s,h=t.interval,p=void 0===h?15:h,c=Math.round(o/p);return e.Stream.periodic(p).take(c).map((function(t){return u(t/c,i,n)})).compose((function(t){return r.default(t,e.Stream.of(n))}))};d.linear={ease:n},d.power2=s,d.power3=u,d.power4=h,d.exponential=c,d.back=a,d.bounce=f,d.circular=_,d.elastic=l,d.sine=y,i.default=d})),p=n((function(t,i){Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(t,i){this.out=t,this.op=i}return t.prototype._n=function(t){this.op.flush()},t.prototype._e=function(t){this.out._e(t)},t.prototype._c=function(){this.op.flush(),this.out._c()},t}(),o=function(){function t(t,i){this.s=t,this.ins=i,this.type="buffer",this.out=null,this.acc=[]}return t.prototype.flush=function(){this.acc.length>0&&(this.out._n(this.acc),this.acc=[])},t.prototype._start=function(t){this.out=t,this.ins._add(this),this.sil=new n(t,this),this.s._add(this.sil)},t.prototype._stop=function(){this.flush(),this.ins._remove(this),this.out=null,this.s._remove(this.sil),this.sil=e.NO_IL},t.prototype._n=function(t){this.acc.push(t)},t.prototype._e=function(t){var i=this.out;i&&i._e(t)},t.prototype._c=function(){var t=this.out;t&&(this.flush(),t._c())},t}();i.default=function(t){return function(i){return new e.Stream(new o(t,i))}}})),c=n((function(t,i){Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(t,i){this.dt=t,this.ins=i,this.type="debounce",this.out=null,this.id=null,this.t=e.NO}return t.prototype._start=function(t){this.out=t,this.ins._add(this)},t.prototype._stop=function(){this.ins._remove(this),this.out=null,this.clearInterval()},t.prototype.clearInterval=function(){var t=this.id;null!==t&&clearInterval(t),this.id=null},t.prototype._n=function(t){var i=this,n=this.out;n&&(this.clearInterval(),this.t=t,this.id=setInterval((function(){i.clearInterval(),n._n(t),i.t=e.NO}),this.dt))},t.prototype._e=function(t){var i=this.out;i&&(this.clearInterval(),i._e(t))},t.prototype._c=function(){var t=this.out;t&&(this.clearInterval(),this.t!=e.NO&&t._n(this.t),this.t=e.NO,t._c())},t}();i.default=function(t){return function(i){return new e.Stream(new n(t,i))}}})),a=n((function(t,i){Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(t,i){this.dt=t,this.ins=i,this.type="delay",this.out=null}return t.prototype._start=function(t){this.out=t,this.ins._add(this)},t.prototype._stop=function(){this.ins._remove(this),this.out=null},t.prototype._n=function(t){var i=this.out;if(i)var n=setInterval((function(){i._n(t),clearInterval(n)}),this.dt)},t.prototype._e=function(t){var i=this.out;if(i)var n=setInterval((function(){i._e(t),clearInterval(n)}),this.dt)},t.prototype._c=function(){var t=this.out;if(t)var i=setInterval((function(){t._c(),clearInterval(i)}),this.dt)},t}();i.default=function(t){return function(i){return new e.Stream(new n(t,i))}}})),f=n((function(t,i){Object.defineProperty(i,"__esModule",{value:!0});var n={},o=function(){function t(t,i){this.ins=t,this.type="dropRepeats",this.out=null,this.v=n,this.isEq=i||function(t,i){return t===i}}return t.prototype._start=function(t){this.out=t,this.ins._add(this)},t.prototype._stop=function(){this.ins._remove(this),this.out=null,this.v=n},t.prototype._n=function(t){var i=this.out;if(i){var o=this.v;o!==n&&this.isEq(t,o)||(this.v=t,i._n(t))}},t.prototype._e=function(t){var i=this.out;i&&i._e(t)},t.prototype._c=function(){var t=this.out;t&&t._c()},t}();i.DropRepeatsOperator=o,i.default=function(t){return void 0===t&&(t=void 0),function(i){return new e.Stream(new o(i,t))}}})),_=n((function(t,i){Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(t,i){this.out=t,this.op=i}return t.prototype._n=function(t){this.op.up()},t.prototype._e=function(t){this.out._e(t)},t.prototype._c=function(){},t}(),o=function(){function t(t,i){this.o=t,this.ins=i,this.type="dropUntil",this.out=null,this.oil=e.NO_IL,this.on=!1}return t.prototype._start=function(t){this.out=t,this.o._add(this.oil=new n(t,this)),this.ins._add(this)},t.prototype._stop=function(){this.ins._remove(this),this.o._remove(this.oil),this.out=null,this.oil=e.NO_IL},t.prototype.up=function(){this.on=!0,this.o._remove(this.oil),this.oil=e.NO_IL},t.prototype._n=function(t){var i=this.out;i&&this.on&&i._n(t)},t.prototype._e=function(t){var i=this.out;i&&i._e(t)},t.prototype._c=function(){var t=this.out;t&&(this._stop(),t._c())},t}();i.DropUntilOperator=o,i.default=function(t){return function(i){return new e.Stream(new o(t,i))}}})),l=n((function(t,i){Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(t,i){this.out=t,this.op=i}return t.prototype._n=function(t){this.out._n(t)},t.prototype._e=function(t){this.out._e(t)},t.prototype._c=function(){this.op.less()},t}(),o=function(){function t(t){this.ins=t,this.type="flattenConcurrently",this.active=1,this.out=null}return t.prototype._start=function(t){this.out=t,this.ins._add(this)},t.prototype._stop=function(){this.ins._remove(this),this.active=1,this.out=null},t.prototype.less=function(){if(0==--this.active){var t=this.out;if(!t)return;t._c()}},t.prototype._n=function(t){var i=this.out;i&&(this.active++,t._add(new n(i,this)))},t.prototype._e=function(t){var i=this.out;i&&i._e(t)},t.prototype._c=function(){this.less()},t}();i.FlattenConcOperator=o,i.default=function(t){return new e.Stream(new o(t))}})),v=n((function(t,i){Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(t,i){this.out=t,this.op=i}return t.prototype._n=function(t){this.out._n(t)},t.prototype._e=function(t){this.out._e(t)},t.prototype._c=function(){this.op.less()},t}(),o=function(){function t(t){this.type="flattenSequentially",this.ins=t,this.out=null,this.open=!0,this.active=null,this.activeIL=null,this.seq=[]}return t.prototype._start=function(t){this.out=t,this.open=!0,this.active=null,this.activeIL=new n(t,this),this.seq=[],this.ins._add(this)},t.prototype._stop=function(){this.ins._remove(this),this.active&&this.activeIL&&this.active._remove(this.activeIL),this.open=!0,this.active=null,this.activeIL=null,this.seq=[],this.out=null},t.prototype.less=function(){this.active=null;var t=this.seq;t.length>0&&this._n(t.shift()),this.open||this.active||this.out._c()},t.prototype._n=function(t){this.out&&(this.active?this.seq.push(t):(this.active=t,t._add(this.activeIL)))},t.prototype._e=function(t){var i=this.out;i&&i._e(t)},t.prototype._c=function(){var t=this.out;t&&(this.open=!1,this.active||0!==this.seq.length||t._c())},t}();i.FlattenSeqOperator=o,i.default=function(t){return new e.Stream(new o(t))}})),y=n((function(t,i){Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(t){this.ins=t,this.type="pairwise",this.val=null,this.has=!1,this.out=null}return t.prototype._start=function(t){this.out=t,this.ins._add(this)},t.prototype._stop=function(){this.ins._remove(this),this.has=!1,this.out=null,this.val=null},t.prototype._n=function(t){var i=this.out;if(i)if(this.has){var n=this.val;this.val=t,i._n([n,t])}else this.val=t,this.has=!0},t.prototype._e=function(t){var i=this.out;i&&i._e(t)},t.prototype._c=function(){var t=this.out;t&&t._c()},t}();i.default=function(t){return new e.Stream(new n(t))}})),d=n((function(t,i){Object.defineProperty(i,"__esModule",{value:!0});var n={},o=function(){function t(t,i){this.i=t,this.p=i,i.ils[t]=this}return t.prototype._n=function(t){var i=this.p;i.out!==n&&i.up(t,this.i)},t.prototype._e=function(t){this.p._e(t)},t.prototype._c=function(){this.p.down(this.i,this)},t}();i.SampleCombineListener=o;var r,s=function(){function t(t,i){this.type="sampleCombine",this.ins=t,this.others=i,this.out=n,this.ils=[],this.Nn=0,this.vals=[]}return t.prototype._start=function(t){this.out=t;for(var i=this.others,e=this.Nn=i.length,r=this.vals=new Array(e),s=0;s<e;s++)r[s]=n,i[s]._add(new o(s,this));this.ins._add(this)},t.prototype._stop=function(){var t=this.others,i=t.length,o=this.ils;this.ins._remove(this);for(var e=0;e<i;e++)t[e]._remove(o[e]);this.out=n,this.vals=[],this.ils=[]},t.prototype._n=function(t){var i=this.out;i!==n&&(this.Nn>0||i._n([t].concat(this.vals)))},t.prototype._e=function(t){var i=this.out;i!==n&&i._e(t)},t.prototype._c=function(){var t=this.out;t!==n&&t._c()},t.prototype.up=function(t,i){var o=this.vals[i];this.Nn>0&&o===n&&this.Nn--,this.vals[i]=t},t.prototype.down=function(t,i){this.others[t]._remove(i)},t}();i.SampleCombineOperator=s,r=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return function(i){return new e.Stream(new s(i,t))}},i.default=r})),m=n((function(t,i){Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(t,i){this.out=t,this.op=i}return t.prototype._n=function(t){this.op.up()},t.prototype._e=function(t){this.out._e(t)},t.prototype._c=function(){this.op.curr._c(),this.out._c()},t}(),o=function(){function t(t,i){this.s=t,this.ins=i,this.type="split",this.curr=new e.Stream,this.out=null,this.sil=e.NO_IL}return t.prototype._start=function(t){this.out=t,this.s._add(this.sil=new n(t,this)),this.ins._add(this),t._n(this.curr)},t.prototype._stop=function(){this.ins._remove(this),this.s._remove(this.sil),this.curr=new e.Stream,this.out=null,this.sil=e.NO_IL},t.prototype.up=function(){this.curr._c(),this.out._n(this.curr=new e.Stream)},t.prototype._n=function(t){this.out&&this.curr._n(t)},t.prototype._e=function(t){var i=this.out;i&&i._e(t)},t.prototype._c=function(){var t=this.out;t&&(this.curr._c(),t._c())},t}();i.SplitOperator=o,i.default=function(t){return function(i){return new e.Stream(new o(t,i))}}})),w=n((function(t,i){Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(t,i){this.dt=t,this.ins=i,this.type="throttle",this.out=null,this.id=null}return t.prototype._start=function(t){this.out=t,this.ins._add(this)},t.prototype._stop=function(){this.ins._remove(this),this.out=null,this.id=null},t.prototype.clearInterval=function(){var t=this.id;null!==t&&clearInterval(t),this.id=null},t.prototype._n=function(t){var i=this,n=this.out;n&&(this.id||(n._n(t),this.id=setInterval((function(){i.clearInterval()}),this.dt)))},t.prototype._e=function(t){var i=this.out;i&&(this.clearInterval(),i._e(t))},t.prototype._c=function(){var t=this.out;t&&(this.clearInterval(),t._c())},t}();i.default=function(t){return function(i){return new e.Stream(new n(t,i))}}}));const b=t,g=b.of.bind(b),I=b.from.bind(b),O=b.fromArray.bind(b),S=b.fromPromise.bind(b),N=b.create.bind(b),x=b.never.bind(b),M=b.empty.bind(b),P=b.throw.bind(b),L=b.periodic.bind(b),k=b.merge.bind(b),E=b.combine.bind(b),D=r,j=s,A=u,T=h,q=({next:t=(t=>t),error:i=(t=>{throw Error(t)}),complete:n=(t=>t)}={})=>({next:t,error:i,complete:n}),C=t=>i=>(i.addListener(q(t)),i),W=(t="debug")=>q({next:console.log.bind(console,t,"next"),error:i=>{console.log(t,"error"),console.error(i)},complete:console.log.bind(console,t,"complete")}),U=t=>"string"==typeof t?i=>i.setDebugListener(W(t)):U(W("debug"))(t),V=t=>"string"==typeof t?C(W(t)):V("debug")(t),F=(...t)=>i=>(i.imitate(...t),i),R=(...t)=>i=>i.debug(...t),z=(...t)=>i=>i.drop(...t),B=(...t)=>i=>i.endWhen(...t),G=(...t)=>i=>i.filter(...t),H=(...t)=>i=>i.fold(...t),J=(...t)=>i=>i.last(...t),K=(...t)=>i=>i.map(...t),Q=(...t)=>i=>i.mapTo(...t),X=(...t)=>i=>i.removeListener(...t),Y=(...t)=>i=>i.replaceError(...t),Z=(...t)=>i=>i.shamefullySendComplete(...t),$=(...t)=>i=>i.shamefullySendError(...t),tt=(...t)=>i=>i.shamefullySendNext(...t),it=(...t)=>i=>i.startWith(...t),nt=t=>i=>i.subscribe(q(t)),ot=(...t)=>i=>i.take(...t),et=(...t)=>i=>b.merge(i,...t),rt=(...t)=>i=>b.combine(i,...t),st=t=>t.remember(),ut=t=>t.flatten(),ht=(...t)=>i=>i.compose(p(...t)),pt=(...t)=>i=>i.compose(c(...t)),ct=(...t)=>i=>i.compose(a(...t)),at=t=>t.compose(f()),ft=(...t)=>i=>i.compose(_(...t)),_t=t=>t.compose(l),lt=t=>t.compose(v),vt=(...t)=>i=>i.compose(y(...t)),yt=(...t)=>i=>i.compose(d(...t)),dt=(...t)=>i=>i.compose(m(...t)),mt=(...t)=>i=>i.compose(w(...t)),wt=t=>i=>i.map(t).compose(_t),bt=t=>i=>i.map(t).compose(lt),gt=t=>i=>i.map(t).flatten(),It=t=>t=>t.compose(ht(x()));export{V as addDebugListener,C as addListener,ht as buffer,E as combine$,rt as combineWith,D as concat$,bt as concatMap,N as create$,pt as debounce,R as debug,ct as delay,z as drop,at as dropRepeats,ft as dropUntil,M as empty$,B as endWhen,G as filter,wt as flatMap,gt as flatMapLatest,ut as flatten,_t as flattenConcurrently,lt as flattenSequentially,H as fold,I as from$,O as fromArray$,j as fromDiagram$,A as fromEvent$,S as fromPromise$,W as getDebugListener,q as getListener,F as imitate,J as last,K as map,Q as mapTo,k as merge$,et as mergeWith,x as never$,g as of$,vt as pairwise,L as periodic$,st as remember,X as removeListener,Y as replaceError,yt as sampleCombine,U as setDebugListener,Z as shamefullySendComplete,$ as shamefullySendError,tt as shamefullySendNext,dt as split,it as startWith,nt as subscribe,ot as take,mt as throttle,P as throw$,It as toArray,T as tween$,b as xs};