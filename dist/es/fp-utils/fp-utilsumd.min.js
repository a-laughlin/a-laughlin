!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).FpUtils={})}(this,(function(e){"use strict";function t(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var r="object"==typeof global&&global&&global.Object===Object&&global,n="object"==typeof self&&self&&self.Object===Object&&self,o=(r||n||Function("return this")()).Symbol,i=Object.prototype,c=i.hasOwnProperty,l=i.toString,a=o?o.toStringTag:void 0;var u=Object.prototype.toString;var s=o?o.toStringTag:void 0;function f(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":s&&s in Object(e)?function(e){var t=c.call(e,a),r=e[a];try{e[a]=void 0;var n=!0}catch(e){}var o=l.call(e);return n&&(t?e[a]=r:delete e[a]),o}(e):function(e){return u.call(e)}(e)}function p(e){return null!=e&&"object"==typeof e}function d(e){return"symbol"==typeof e||p(e)&&"[object Symbol]"==f(e)}var b=/^\s+|\s+$/g,g=/^[-+]0x[0-9a-f]+$/i,y=/^0b[01]+$/i,m=/^0o[0-7]+$/i,h=parseInt;function j(e){return e?(e=function(e){if("number"==typeof e)return e;if(d(e))return NaN;if(t(e)){var r="function"==typeof e.valueOf?e.valueOf():e;e=t(r)?r+"":r}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(b,"");var n=y.test(e);return n||m.test(e)?h(e.slice(2),n?2:8):g.test(e)?NaN:+e}(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function O(e){return"number"==typeof e&&e==function(e){var t=j(e),r=t%1;return t==t?r?t-r:t:0}(e)}var v=Array.isArray,T=o?o.prototype:void 0,A=T?T.toString:void 0;function S(e){if("string"==typeof e)return e;if(v(e))return function(e,t){for(var r=-1,n=null==e?0:e.length,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o}(e,S)+"";if(d(e))return A?A.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}var P=0;const N=e=>e;if(void 0===globalThis.process&&(globalThis.process={env:{NODE_ENV:"production"}}),"production"!==globalThis.process.env.NODE_ENV){const t=e=>e.name?e.name:e.toString();e.curry=e=>{const r=(...n)=>{if(n.length>=e.length)return e(...n);const o=(...e)=>r(...n,...e);return o.toString=()=>`${t(e)}(${n.join(", ")})`,Object.defineProperty(o,"name",{value:`${t(e)}(${n.join(", ")})`})};return r.toString=()=>t(e),Object.defineProperty(r,"name",{value:t(e)})},e.compose=(...e)=>{if(0===e.length)return N;if(1===e.length)return e[0];const r=e[e.length-1];e=e.slice(0,e.length-1);const n=(...t)=>e.reduceRight((e,t)=>t(e),r(...t));return n.toString=()=>`compose(${e.map(t).join(", ")})`,n},e.pipe=(e=N,...r)=>{if(0===r.length)return e;const n=(...t)=>r.reduce((e,t)=>t(e),e(...t));return n.toString=()=>`pipe(${r.reverse().map(t).join(", ")})`,n}}else e.curry=t=>(...r)=>r.length>=t.length?t(...r):e.curry(t.bind(null,...r)),e.compose=(...e)=>(...t)=>0===e.length?N:1===e.length?e[0]:e.slice(0,e.length-1).reduceRight((e,t)=>t(e),e[e.length-1](...t)),e.pipe=(e=N,...t)=>(...r)=>0===t.length?e:t.reduce((e,t)=>t(e),e(...r));const E=()=>[],x=()=>({}),k=()=>!0,F=()=>{},V=Object.freeze([]),$=Object.freeze(Object.create(null)),I=re(C,e=>"string"==typeof e.message),R=e=>"string"==typeof e,B=e=>"function"==typeof e,C=e=>"object"==typeof e&&null!==e,D=Array.isArray.bind(Array),L=e=>"object"==typeof e&&null!==e&&"function"==typeof e.then,M=(e,t)=>(...r)=>{const n=e(...r),o=t(...r);return te(D,n,o)},W=e=>(...t)=>t.length>1?e(t):e(...t),z=e=>(...t)=>Fe(e=>e(...t))(e),U=e=>(...t)=>xe(e=>e(...t))(e),_=e=>D(e)?U(e):z(e),w=_,q=e=>t=>e,K=(e=[])=>D(e)?e:[e],G=e=>R(e)?e:""+e,H=e=>"function"==typeof e?e:q(e),J=(e,t,r)=>(e.hasOwnProperty(t)?e[t]:e[t]=r,e),Q=e=>(t,r,n)=>J(t,r,e(t,r,n)),X=Q(E),Y=Q(x),Z=e=>(...t)=>!e(...t),ee=(e,t,r=N)=>n=>e(n)?t(n):r(n),te=(e,t,r=N)=>(...n)=>(e(...n)?t:r)(...n),re=(...e)=>(...t)=>{for(const r of e)if(!0!==r(...t))return!1;return!0},ne=(...e)=>(...t)=>{for(const r of e)if(!0===r(...t))return!0;return!1},oe=(...e)=>Z(ne(...e)),ie=W(e=>(...t)=>{for(let[r,n]of e)if(r(...t))return n}),ce=W(e=>(...t)=>H(ie(...e)(...t))(...t)),le=e=>(t=[])=>{const r=t.length,n=[];let o=-1;for(;++o<r;)e(n,t[o],o,t);return n},ae=e=>(t={})=>{let r,n=Object.create(null);for(r in t)e(n,t[r],r,t);return n},ue=M(e=>(t=[])=>{const r=t.length,n=Object.create(null);let o=-1;for(;++o<r;)e(n,t[o],o,t);return n},ae),se=ue,fe=M(le,e=>(t={})=>{let r,n=[];for(r in t)e(n,t[r],r,t);return n}),pe=fe,de=M(le,ae),be=de,ge=e=>fe((t,r,n)=>e(r,n)&&(t[t.length]=r)),ye=ge,me=e=>ue((t,r,n)=>e(r,n)&&(t[n]=r)),he=me,je=M(ge,me),Oe=je,ve=e=>fe((t,r,n)=>!e(r,n)&&(t[t.length]=r)),Te=ve,Ae=e=>ue((t,r,n)=>!e(r,n)&&(t[n]=r)),Se=Ae,Pe=M(ve,Ae),Ne=Pe,Ee=e=>fe((t,r,n)=>t[t.length]=e(r,n)),xe=Ee,ke=e=>ue((t,r,n)=>t[n]=e(r,n)),Fe=ke,Ve=M(Ee,ke),$e=Ve,Ie=(e,t)=>fe((r,n,o)=>e(n,o)&&(r[r.length]=t(n,o))),Re=Ie,Be=(e,t)=>ue((r,n,o)=>e(n,o)&&(r[o]=t(n,o))),Ce=Be,De=M(Ie,Be),Le=De,Me=M((...e)=>U([...e.map(ye),ye(oe(...e))]),(...e)=>U([...e.map(e=>he(e)),he(oe(...e))])),We=M(e=>({length:t})=>t===e,e=>t=>{let r,n=0;for(r in t)if(++n>e)return!1;return n===e}),ze=We(0),Ue=We(1),_e=ee(R,(e="id")=>ue((t,r,n)=>{t[r[e]]=r}),(e=(e=>e.id))=>ue((t,r,n)=>{t[e(r,n)]=r})),we=(e=[],t)=>(e[e.length]=t,e),qe=(e={},t,r)=>(e[r]=we(e[r],t),e),Ke=ue((e,t,r)=>{for(r in t)qe(e,t,r)}),Ge=ue((e,t)=>{let r,n;for(r in t)for(n of K(t[r]))qe(e,t,G(n))}),He=ce([R,e=>(e=e.split("."),t=>e.reduce((e,t)=>D(e)&&!O(+t)?e.map(e=>e[t]):e[t],t))],[D,e=>Je(e)],[C,e=>t=>Fe(e=>He(e)(t))(e)],[k,N]),Je=ce([D,e=>t=>de((e,r)=>e[r]=t[r])(e)],[R,e=>Je([e])],[B,je]),Qe=({getPrefix:e=(()=>""),getSuffix:t=(()=>""),mapPairs:r=(e=>e),keySplit:n="=",pairSplit:o="&"}={})=>(i={})=>{const c=Object.keys(i).map(e=>[e,i[e]].map(r).join(n)).join(o);return e(i,c)+c+t(i,c)},Xe=Qe({getPrefix:(e,t)=>t?"?":"",mapPairs:encodeURIComponent}),Ye=(e,t,r,n)=>lt(r(t))(e,n),Ze=(e=[],t)=>(e[e.length]=t,e),et=(e={},t,r)=>(e[r]=t,e),tt=e=>t=>Ye([],Ze,e,t),rt=e=>t=>Ye({},et,e,t),nt=N,ot=e=>t=>(...r)=>(e(...r),t(...r)),it=(e=k)=>t=>(r,...n)=>e(...n)?t(r,...n):r,ct=(e=k)=>t=>(...r)=>e(...r)?t(...r):r[0],lt=e=>(t,r,n,...o)=>{if(!C(r))return e(t,r,n,...o);if(D(r)){for(let n=-1,o=r.length;++n<o;)t=L(t)?Promise.all([t,r[n]]).then(([t,o])=>e(t,o,n,r)):e(t,r[n],n,r);return t}let i;for(i in r)t=L(t)?Promise.all([t,r[i]]).then(([t,n])=>e(t,n,i,r)):e(t,r[i],i,r);return t},at=(e,t,r=N)=>n=>te(e,t(n),r(n)),ut=W(e=>0===e.length?itentity:1===e.length?te(e[0],N,F):2===e.length?at(e[0],e[1]):t=>ce(we(e.map(([e,r])=>[e,r(t)]),[k,t]))),st=(e,t)=>C(t),ft=e=>at(st,e),pt=(e=x)=>ft(t=>(r,n,o,i,c)=>t(r,c(e(r,n,o,i),n),o,i)),dt=(e={},t={})=>{const r={},n={},o={},i={},c={};let l,a=0,u=0,s=0,f=0;for(l in e)l in t?s+=i[l]=o[l]=e[l]===t[l]?1:f+=c[l]=1:a+=i[l]=r[l]=1;for(l in t)l in e?l in o?i[l]=o[l]=1:s+=i[l]=o[l]=e[l]===t[l]?1:f+=c[l]=1:u+=i[l]=n[l]=1;return{anb:r,anbc:a,bna:n,bnac:u,aib:o,aibc:s,aub:i,aubc:a+u+s,changed:c,changedc:f,a:e,b:t}};e.acceptArrayOrArgs=W,e.and=re,e.appendArrayReducer=Ze,e.appendObjectReducer=et,e.cond=ce,e.condNoExec=ie,e.constant=q,e.converge=w,e.diffBy=(e=(e=>e.id),t=[])=>e?dt(...t.map(_e(e))):dt(t),e.diffObjs=dt,e.dpipe=(t,...r)=>e.pipe(...r)(t),e.ensureArray=K,e.ensureFunction=H,e.ensureProp=J,e.ensurePropIsArray=X,e.ensurePropIsObject=Y,e.ensurePropWith=Q,e.ensureString=G,e.fa=ye,e.filterMapToArray=Ie,e.filterMapToObject=Be,e.filterMapToSame=De,e.filterToArray=ge,e.filterToObject=me,e.filterToSame=je,e.first=e=>{if(D(e))return e[0];for(const t in e)return e[t]},e.fma=Re,e.fmo=Ce,e.fmx=Le,e.fo=he,e.frozenEmptyArray=V,e.frozenEmptyObject=$,e.fx=Oe,e.groupBy=e=>ue((t,r,n,o)=>qe(t,r,e(r,n))),e.groupByKeys=Ke,e.groupByValues=Ge,e.has=e=>t=>e in t,e.identity=N,e.ifElse=te,e.ifElseUnary=ee,e.immutableFilterObjectToObject=(e=((e,t,r)=>!0))=>(t={})=>{let r,n={},o=!1;for(r in t)e(t[r],r,t)?n[r]=t[r]:o=!0;return!0===o?n:t},e.immutableTransArrayToArray=e=>(t=[])=>{let r,n=[],o=!1;for(r of t)e(n,t[r],r,t),n[r]!==t[r]&&(o=!0);return!1===o?t:n},e.immutableTransObjectToObject=e=>(t={})=>{let r,n={},o=!1;for(r in t)e(n,t[r],r,t),n[r]!==t[r]&&(o=!0);return!1===o?t:n},e.invokeArgsOnObj=(...e)=>mapValues(t=>t(...e)),e.invokeObjectWithArgs=e=>(...t)=>mapValues(e=>B(e)?e(...t):e)(e),e.is=e=>t=>e===t,e.isArray=D,e.isDeepEqual=(e,t)=>{if(e===t)return!0;if("object"!=typeof e)return e===t;if(Array.isArray(e)){if(!1===Array.isArray(t)||e.length!==t.length)return!1;let r=-1,n=toCheck.length;for(;++r<n;)if(!1===isCached(e[r],t[r]))return!1;return!0}let r;for(r in toCheck)if(!1===isCached(e[r],t[r]))return!1;return!0},e.isError=I,e.isFalsy=e=>!e,e.isFunction=B,e.isInteger=O,e.isNumber=function(e){return"number"==typeof e||p(e)&&"[object Number]"==f(e)},e.isObjectLike=C,e.isProductionEnv=()=>"production"===process.env.NODE_ENV,e.isPromise=L,e.isString=R,e.isTruthy=e=>!!e,e.isUndefOrNull=e=>null==e,e.keyBy=_e,e.last=e=>(e=D(e)?e:Object.values(e))[e.length-1],e.len=We,e.len0=ze,e.len1=Ue,e.ma=xe,e.mapToArray=Ee,e.mapToObject=ke,e.mapToSame=Ve,e.memoize=(e,t=N)=>{const r=(...n)=>{const o=t(...n);return e(...r.cache.has(o)?r.cache.get(o):r.cache.set(o,n)&&n)};return r.cache=new WeakMap,r},e.mo=Fe,e.mx=$e,e.none=oe,e.noop=F,e.not=Z,e.oa=Te,e.objStringifierFactory=Qe,e.objToUrlParams=Xe,e.omitToArray=ve,e.omitToObject=Ae,e.omitToSame=Pe,e.oo=Se,e.or=ne,e.over=_,e.overArray=U,e.overObj=z,e.ox=Ne,e.partition=Me,e.pget=He,e.pick=Je,e.plog=(e="")=>t=>console.log(e,t)||t,e.ra=pe,e.range=(e=10,t=0,r=1,n=N)=>{const o=[];for(;t<e;)o[o.length]=n(t+=r);return o},e.reduce=e=>(t,r)=>lt(e)(r,t),e.renameProps=e=>t=>{let r,n,o={...t};for(r in e)n=e[r],o[r]=t[n],delete o[n];return o},e.reverse=e=>e.slice(0).reverse(),e.ro=se,e.rx=be,e.slice=(...e)=>t=>t.slice(...e),e.sort=e=>_sortBy(e,null),e.stubArray=E,e.stubFalse=()=>!1,e.stubNull=()=>null,e.stubObject=x,e.stubString=()=>"",e.stubTrue=k,e.tdAssign=e=>t=>(r,n,...o)=>t({...r,...e(r,n,...o)},n,...o),e.tdCond=ut,e.tdDPipeToArray=(t,...r)=>tt(e.compose(...r))(t),e.tdDPipeToObject=(t,...r)=>rt(e.compose(...r))(t),e.tdDfObjectLikeValuesWith=pt,e.tdFilter=it,e.tdFilterWithAcc=ct,e.tdIdentity=nt,e.tdIfElse=at,e.tdIfValueObjectLike=ft,e.tdKeyBy=(e=(e=>e.id))=>t=>(r,n,o,i)=>t(r,n,e(n,o,i),i),e.tdLog=(e="log",t=k)=>ot((...r)=>t(...r)&&console.log(e,...r)),e.tdMap=e=>t=>(r,n,...o)=>t(r,e(n,...o),...o),e.tdMapWithAcc=e=>t=>(r,n,...o)=>t(r,e(r,n,...o),...o),e.tdNormalizePromises=e=>(t,r,...n)=>L(t)?L(r)?Promise.all([t,r]).then(([t,r])=>e(t,r,...n)):t.then(t=>e(t,r,...n)):L(r)?r.then(r=>e(t,r,...n)):e(t,r,...n),e.tdOmit=e=>it(Z(e)),e.tdOmitWithAcc=e=>ct(Z(e)),e.tdPipeToArray=(...t)=>tt(e.compose(...t)),e.tdPipeToObject=(...t)=>rt(e.compose(...t)),e.tdReduce=e=>t=>(r,...n)=>t(e(r,...n),...n),e.tdReduceListValue=lt,e.tdSet=(e,t)=>r=>(n,o,...i)=>r({...n,[e]:t(n,o,...i)},o,...i),e.tdTap=ot,e.tdToArray=tt,e.tdToObject=rt,e.tdToSame=e=>t=>(Array.isArray(t)?tt:rt)(e)(t),e.tdValue=e=>t=>Ye(void 0,N,e,[t]),e.transToArray=fe,e.transToObject=ue,e.transToSame=de,e.transduce=Ye,e.transduceBF=({preVisitTransducer:t=nt,visitTransducer:r=nt,postVisitTransducer:n=nt,edgeCombiner:o=((e={},t,r)=>(e[r]=t,e)),childrenLoopReducer:i=lt}={})=>{let c=[];const l=i((e,t,r,n)=>(we(c,[e,t,r,n]),e)),a=e.compose(t,e=>(t,r,n,o)=>{if(C(r)){const i={};e(t,i,n,o),l(i,r,n,o)}else e(t,r,n,o);c.length>0&&a(...c.shift())},n)(o);return i((e,t,r,n)=>(a(e,t,r,n),e))},e.transduceDF=({descentTransducer:t=nt,visitTransducer:r=pt(x),ascentTransducer:n=nt,edgeCombiner:o=((e={},t,r)=>(e[r]=t,e)),childrenLoopReducer:i=lt}={})=>{const c=i(e.compose(t,e=>(t,r,n,o)=>e(t,r,n,o,c),r,n)(o));return c},e.uniqueId=function(e){var t,r=++P;return(null==(t=e)?"":S(t))+r},e.xor=t=>e.pipe(filter(t),Ue),Object.defineProperty(e,"__esModule",{value:!0})}));