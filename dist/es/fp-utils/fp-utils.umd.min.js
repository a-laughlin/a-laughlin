!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).FpUtils={})}(this,(function(e){"use strict";const t=e=>e;if(void 0===globalThis.process&&(globalThis.process={env:{NODE_ENV:"production"}}),"production"!==globalThis.process.env.NODE_ENV){const r=e=>e.name?e.name:e.toString();e.curry=e=>{const t=(...n)=>{if(n.length>=e.length)return e(...n);const o=(...e)=>t(...n,...e);return o.toString=()=>`${r(e)}(${n.join(", ")})`,Object.defineProperty(o,"name",{value:`${r(e)}(${n.join(", ")})`})};return t.toString=()=>r(e),Object.defineProperty(t,"name",{value:r(e)})},e.compose=(...e)=>{if(0===e.length)return t;if(1===e.length)return e[0];const n=e[e.length-1];e=e.slice(0,e.length-1);const o=(...t)=>e.reduceRight((e,t)=>t(e),n(...t));return o.toString=()=>`compose(${e.map(r).join(", ")})`,o},e.pipe=(e=t,...n)=>{if(0===n.length)return e;const o=(...t)=>n.reduce((e,t)=>t(e),e(...t));return o.toString=()=>`pipe(${n.reverse().map(r).join(", ")})`,o}}else e.curry=t=>(...r)=>r.length>=t.length?t(...r):e.curry(t.bind(null,...r)),e.compose=(...e)=>(...r)=>0===e.length?t:1===e.length?e[0]:e.slice(0,e.length-1).reduceRight((e,t)=>t(e),e[e.length-1](...r)),e.pipe=(e=t,...r)=>(...t)=>0===r.length?e:r.reduce((e,t)=>t(e),e(...t));const r=()=>[],n=()=>({}),o=()=>!0,i=()=>!1,s=Object.freeze([]),a=Object.freeze(Object.create(null)),l=Number.isFinite||(e=>"number"==typeof value&&l(value)),u=Number.isInteger||(e=>l(e)&&e%1==0),f=e=>"string"==typeof e,p=e=>"function"==typeof e,d=e=>"object"==typeof e&&null!==e,g=Array.isArray.bind(Array),b=(e,t)=>(...r)=>N(g,e(...r),t(...r)),y=e=>(...t)=>t.length>1?e(t):e(A(t[0])),m=(e={})=>(...t)=>pe(e=>("function"!=typeof e&&console.log("typeof f",e),e(...t)))(e),h=(e=[])=>(...t)=>ue(e=>e(...t))(e),j=e=>g(e)?h(e):m(e),O=j,T=e=>t=>e,A=(e=[])=>g(e)?e:[e],P=e=>f(e)?e:""+e,v=(e,t,r)=>(e.hasOwnProperty(t)?e[t]:e[t]=r,e),S=e=>(t,r,n)=>v(t,r,e(t,r,n)),E=S(r),x=S(n),V=e=>(...t)=>!e(...t),F=(e,r,n=t)=>t=>e(t)?r(t):n(t),N=(e,r,n=t)=>(...t)=>(e(...t)?r:n)(...t),I=y(e=>(...t)=>{for(const r of e)if(!0!==r(...t))return!1;return!0}),M=y(e=>(...t)=>{for(const r of e)if(!0===r(...t))return!0;return!1}),R=y(e=>(...t)=>{let r,n=0;for(r of e)!0===r(...t)&&++n;return 1===n}),D=(e="")=>(t={})=>e in t,W=([e,t]=[])=>(r={})=>r[e]===t,$=(e={})=>I(...le((e,t)=>W([t,e]))(e)),B=e.compose(V,M),C=y(e=>(...t)=>{for(const[r,n]of e)if(r(...t))return n}),L=y(e=>(...t)=>{for(const[r,n]of e)if(r(...t))return n(...t)}),_=e=>(t=[])=>{const r=t.length,n=Object.create(null);let o=-1;for(;++o<r;)e(n,t[o],o,t);return n},z=e=>(t=[])=>{const r=t.length,n=[];let o=-1;for(;++o<r;)e(n,t[o],o,t);return n},K=e=>(t={})=>{let r,n=Object.create(null);for(r in t)e(n,t[r],r,t);return n},U=e=>(t={})=>{let r,n=[];for(r in t)e(n,t[r],r,t);return n},q=b(_,K),w=q,G=b(z,U),H=G,J=b(z,K),Q=J,X=e=>G((t,r,n)=>e(r,n)&&(t[t.length]=r)),Y=X,Z=e=>q((t,r,n)=>e(r,n)&&(t[n]=r)),ee=Z,te=b(X,Z),re=te,ne=e=>G((t,r,n)=>!e(r,n)&&(t[t.length]=r)),oe=ne,ie=e=>q((t,r,n)=>!e(r,n)&&(t[n]=r)),ce=ie,se=b(ne,ie),ae=se,le=e=>G((t,r,n)=>t[t.length]=e(r,n)),ue=le,fe=e=>q((t,r,n)=>t[n]=e(r,n)),pe=fe,de=b(le,fe),ge=de,be=(e,t)=>G((r,n,o)=>e(n,o)&&(r[r.length]=t(n,o))),ye=be,me=(e,t)=>q((r,n,o)=>e(n,o)&&(r[o]=t(n,o))),he=me,je=b(be,me),Oe=je,Te=b((...e)=>h([...e.map(Y),Y(B(...e))]),(...e)=>h([...e.map(e=>ee(e)),ee(B(...e))])),Ae=b(e=>({length:t})=>t===e,e=>t=>{let r,n=0;for(r in t)if(++n>e)return!1;return n===e}),Pe=Ae(0),ve=Ae(1),Se=F(f,(e="id")=>q((t,r,n)=>{t[r[e]]=r}),(e=(e=>e.id))=>q((t,r,n)=>{t[e(r,n)]=r})),Ee=(e=[],t)=>(e[e.length]=t,e),ke=(e={},t,r)=>(e[r]=Ee(e[r],t),e),xe=q((e,t,r)=>{for(r in t)ke(e,t,r)}),Ve=q((e,t)=>{let r,n;for(r in t)for(n of A(t[r]))ke(e,t,P(n))}),Fe=L([f,e=>(e=e.split("."),t=>e.reduce((e,t)=>g(e)&&!u(+t)?e.map(e=>e[t]):e[t],t))],[g,e=>Ne(e)],[d,e=>t=>pe(e=>Fe(e)(t))(e)],[o,t]),Ne=L([g,e=>t=>_((e,r)=>e[r]=t[r])(e)],[f,e=>t=>t[e]],[p,te]),Ie=({getPrefix:e=(()=>""),getSuffix:t=(()=>""),mapPairs:r=(e=>e),keySplit:n="=",pairSplit:o="&"}={})=>(i={})=>{const c=Object.keys(i).map(e=>[e,i[e]].map(r).join(n)).join(o);return e(i,c)+c+t(i,c)},Me=Ie({getPrefix:(e,t)=>t?"?":"",mapPairs:encodeURIComponent}),Re=(()=>{let e=0;return(t="")=>`${t}${++e}`})(),De=(e,t,r,n)=>Ue(r(t))(e,n),We=(e=[],t)=>(e[e.length]=t,e),$e=(e={},t,r)=>(e[r]=t,e),Be=e=>t=>De([],We,e,t),Ce=e=>t=>De({},$e,e,t),Le=t,_e=e=>t=>(...r)=>(e(...r),t(...r)),ze=(e=o)=>t=>(r,...n)=>e(...n)?t(r,...n):r,Ke=(e=o)=>t=>(...r)=>e(...r)?t(...r):r[0],Ue=e=>(t,r,n,...o)=>{if(!d(r))return e(t,r,n,...o);if(g(r))for(let n=-1,o=r.length;++n<o;)t=e(t,r[n],n,r);else for(const n in r)t=e(t,r[n],n,r);return t},qe=(e,r,n=t)=>t=>N(e,r(t),n(t)),we=(e,t)=>d(t),Ge=e=>qe(we,e),He=(e=n)=>Ge(t=>(r,n,o,i,c)=>t(r,c(e(r,n,o,i),n),o,i)),Je=(e={},t={})=>{const r={},n={},o={},i={},c={};let s,a=0,l=0,u=0,f=0;for(s in e)s in t?u+=i[s]=o[s]=e[s]===t[s]?1:f+=c[s]=1:a+=i[s]=r[s]=1;for(s in t)s in e?s in o?i[s]=o[s]=1:u+=i[s]=o[s]=e[s]===t[s]?1:f+=c[s]=1:l+=i[s]=n[s]=1;return{anb:r,anbc:a,bna:n,bnac:l,aib:o,aibc:u,aub:i,aubc:a+l+u,changed:c,changedc:f,a:e,b:t}};e._is=e=>t=>e===t,e.acceptArrayOrArgs=y,e.and=I,e.appendArrayReducer=We,e.appendObjectReducer=$e,e.cond=L,e.condNoExec=C,e.constant=T,e.converge=O,e.diffBy=(e=(e=>e.id),t=[])=>e?Je(...t.map(Se(e))):Je(t),e.diffObjs=Je,e.dpipe=(t,...r)=>e.pipe(...r)(t),e.ensureArray=A,e.ensureFunction=e=>"function"==typeof e?e:T(e),e.ensureProp=v,e.ensurePropIsArray=E,e.ensurePropIsObject=x,e.ensurePropWith=S,e.ensureString=P,e.fa=Y,e.filterMapToArray=be,e.filterMapToObject=me,e.filterMapToSame=je,e.filterToArray=X,e.filterToObject=Z,e.filterToSame=te,e.first=e=>{if(g(e))return e[0];for(const t in e)return e[t]},e.fma=ye,e.fmo=he,e.fmx=Oe,e.fo=ee,e.frozenEmptyArray=s,e.frozenEmptyObject=a,e.fx=re,e.groupBy=e=>q((t,r,n,o)=>ke(t,r,e(r,n))),e.groupByKeys=xe,e.groupByValues=Ve,e.has=e=>t=>e in t,e.hasKey=D,e.identity=t,e.ifElse=N,e.ifElseUnary=F,e.immutableFilterObjectToObject=(e=((e,t,r)=>!0))=>(t={})=>{let r,n={},o=!1;for(r in t)e(t[r],r,t)?n[r]=t[r]:o=!0;return!0===o?n:t},e.immutableTransArrayToArray=e=>(t=[])=>{let r,n=[],o=!1;for(r of t)e(n,t[r],r,t),n[r]!==t[r]&&(o=!0);return!1===o?t:n},e.immutableTransObjectToObject=e=>(t={})=>{let r,n={},o=!1;for(r in t)e(n,t[r],r,t),n[r]!==t[r]&&(o=!0);return!1===o?t:n},e.invokeArgsOnObj=(...e)=>mapValues(t=>t(...e)),e.invokeObjectWithArgs=e=>(...t)=>mapValues(e=>p(e)?e(...t):e)(e),e.is=e=>t=>e===t,e.isArray=g,e.isDeepEqual=(e,t)=>{if(e===t)return!0;if("object"!=typeof e)return e===t;if(Array.isArray(e)){if(!1===Array.isArray(t)||e.length!==t.length)return!1;let r=-1,n=toCheck.length;for(;++r<n;)if(!1===isCached(e[r],t[r]))return!1;return!0}let r;for(r in toCheck)if(!1===isCached(e[r],t[r]))return!1;return!0},e.isError=e=>d(e)&&"string"==typeof e.message,e.isFinite=l,e.isFunction=p,e.isInteger=u,e.isObjectLike=d,e.isProductionEnv=()=>"production"===process.env.NODE_ENV,e.isPromise=e=>"object"==typeof e&&null!==e&&"function"==typeof e.then,e.isString=f,e.isUndefOrNull=e=>null==e,e.keyBy=Se,e.last=e=>(e=g(e)?e:Object.values(e))[e.length-1],e.len=Ae,e.len0=Pe,e.len1=ve,e.ma=ue,e.mapToArray=le,e.mapToObject=fe,e.mapToSame=de,e.matches=$,e.matchesProperty=W,e.memoize=(e,r=t)=>{const n=(...t)=>{const o=r(...t);return e(...n.cache.has(o)?n.cache.get(o):n.cache.set(o,t)&&t)};return n.cache=new WeakMap,n},e.mo=pe,e.mx=ge,e.none=B,e.noop=()=>{},e.not=V,e.oa=oe,e.objStringifierFactory=Ie,e.objToUrlParams=Me,e.omitToArray=ne,e.omitToObject=ie,e.omitToSame=se,e.oo=ce,e.or=M,e.over=j,e.overArray=h,e.overObj=m,e.ox=ae,e.partition=Te,e.pget=Fe,e.pick=Ne,e.plog=(e="")=>t=>console.log(e,t)||t,e.ra=H,e.range=(e=10,r=0,n=1,o=t)=>{const i=[];for(;r<e;)i[i.length]=o(r+=n);return i},e.reduce=e=>(t,r)=>Ue(e)(r,t),e.ro=w,e.rx=Q,e.stubArray=r,e.stubFalse=i,e.stubNull=()=>null,e.stubObject=n,e.stubString=()=>"",e.stubTrue=o,e.tdAssign=e=>t=>(r,n,...o)=>t({...r,...e(r,n,...o)},n,...o),e.tdDPipeToArray=(t,...r)=>Be(e.compose(...r))(t),e.tdDPipeToObject=(t,...r)=>Ce(e.compose(...r))(t),e.tdDfObjectLikeValuesWith=He,e.tdFilter=ze,e.tdFilterWithAcc=Ke,e.tdIdentity=Le,e.tdIfElse=qe,e.tdIfValueObjectLike=Ge,e.tdKeyBy=(e=(e=>e.id))=>t=>(r,n,o,i)=>t(r,n,e(n,o,i),i),e.tdLog=(e="log",t=o)=>_e((...r)=>t(...r)&&console.log(e,...r)),e.tdMap=e=>t=>(r,n,...o)=>t(r,e(n,...o),...o),e.tdMapKey=e=>t=>(r,n,o,...i)=>t(r,n,e(n,o,...i),...i),e.tdMapKeyWithAcc=e=>t=>(r,n,o,...i)=>t(r,n,e(r,n,o,...i),...i),e.tdMapWithAcc=e=>t=>(r,n,...o)=>t(r,e(r,n,...o),...o),e.tdOmit=e=>ze(V(e)),e.tdOmitWithAcc=e=>Ke(V(e)),e.tdPipeToArray=(...t)=>Be(e.compose(...t)),e.tdPipeToObject=(...t)=>Ce(e.compose(...t)),e.tdReduce=e=>t=>(r,...n)=>t(e(r,...n),...n),e.tdReduceListValue=Ue,e.tdSet=(e,t)=>r=>(n,o,...i)=>{const s=t(n,o,...i);return n[e]===s?r(n,o,k,c):r({...n,[e]:s},o,...i)},e.tdTap=_e,e.tdToArray=Be,e.tdToObject=Ce,e.tdToObjectImmutable=t=>{let r,n={};return o=>{let i=0,c=!1;const s=Ce(e.compose(t,_e((e,t,r,o)=>{++i,t!==n[r]&&(c=!0)})))(o);return!0!==c&&r===i||(r=i,n=s),n}},e.tdToSame=e=>t=>(Array.isArray(t)?Be:Ce)(e)(t),e.toPredicate=e=>p(e)?e:g(e)?W(e):d(e)?$(e):f(e)?D(e):i,e.transArrayToArray=z,e.transArrayToObject=_,e.transObjectToArray=U,e.transObjectToObject=K,e.transToArray=G,e.transToObject=q,e.transToSame=J,e.transduce=De,e.transduceBF=({preVisit:t=Le,visit:r=Le,postVisit:n=Le,edgeCombiner:o=((e={},t,r)=>(e[r]=t,e)),childrenLoopReducer:i=Ue}={})=>{let c=[];const s=i((e,t,r,n)=>(Ee(c,[e,t,r,n]),e)),a=e.compose(t,e=>(t,r,n,o)=>{if(d(r)){const i={};e(t,i,n,o),s(i,r,n,o)}else e(t,r,n,o);c.length>0&&a(...c.shift())},n)(o);return i((e,t,r,n)=>(a(e,t,r,n),e))},e.transduceDF=({preVisit:t=Le,visit:r=He(n),postVisit:o=Le,edgeCombiner:i=((e={},t,r)=>(e[r]=t,e)),childrenLoopReducer:c=Ue}={})=>{const s=c(e.compose(t,e=>(t,r,n,o)=>e(t,r,n,o,s),r,o)(i));return s},e.uniqueId=Re,e.xor=R,Object.defineProperty(e,"__esModule",{value:!0})}));